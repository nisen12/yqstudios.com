<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quan Yuan - UX/UI Page</title>
<link rel="icon" type="image/svg+xml" href="image/yqlogo.svg">
<link href="https://fonts.googleapis.com/css2?family=Baloo+Tammudu&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Klee+One&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro&display=swap" rel="stylesheet">

<meta name="description" content="Quan Yuan's UX/UI project">
    <meta name="keywords" content="Quan Yuan, UX/UI">


<style>
html, body {
    margin: 0;
    padding: 0;
    font-family: 'Roboto', sans-serif;
    background-color: #D9D9D9;
    overflow-x: hidden;
}
a {
    text-decoration: none;
}



/* Header */
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-left: 2.1%;
    padding-right: 2.1%;
    padding-top: 20px;
    padding-bottom: 20px;
    background: transparent;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    font-size: smaller;
    mix-blend-mode: difference;
}

.navbar a {
    text-decoration: none;
    font-weight: 500;
    margin: 0 5px;
    color: #D9D9D9; /* é»˜è®¤é¢œè‰² */
    transition: color 0.3s ease, transform 0.3s ease;
}

.navbar a:hover {
    transform: scale(1.2); /* è½»å¾®æ”¾å¤§äº¤äº’ */


}

/* Hero Section */
.hero {
    position: relative;
    width: 100%;
    height: 300vh;
    overflow: hidden;
}

.hero-back {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: url('image/ux/bg.jpg') center center / cover no-repeat;
    z-index: 1;
}

/* çºµå‘æ’åˆ—çš„å›¾æ ‡ */
.hero-icons {
    position: absolute;
    top: calc(100vh + 30px);
    width: 100%;
    height: 180vh;
    display: flex;
    flex-direction: column;
    justify-content: space-evenly;
    align-items: center;
    z-index: 2;
    pointer-events: none;
    transition: transform 0.1s linear;
}

.hero-icons img {
    width: 300%;
    height: auto;
    transition: transform 0.3s ease;
}

/* front å±‚å›ºå®šé«˜åº¦ + flo å›¾ç‰‡æ’åˆ— */
.hero-front {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    aspect-ratio: 18/9;
    background-color: #1D1D1D;
    z-index: 3;
    transform-origin: center center;
    transform: translate(-50%, -50%);
    transition: transform 0.3s ease;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    overflow: hidden;
}

/* flo å›¾ç‰‡åŸºç¡€æ ·å¼ */
/* flo å›¾ç‰‡å®¹å™¨ */
.flo-container {
    display: flex;
    gap:100px;
    margin-bottom: 20px;
    margin-left: 100px;
    position: relative;
    justify-content: center;
    align-items: center;
    transition: transform 0.3s ease;

}

.flo-img {
    height: 80%; 
    width: auto;
    margin-bottom: 80px;
    transition: all 0.3s ease;
    position: relative;
}
.flo2-wrapper {
    height: 80%; 
}

/* flo4 å¤–æ¡†ç‰¹å®šæ ·å¼ */
.flo4-wrapper {
    height: 90%; 
    z-index: 2; /* è®© flo4 åœ¨ flo5 ä¸Šé¢ */
}

/* å„ flo åˆå§‹ä½ç½® */
.flo1-img { transform: translate(250px, 0); }
.flo2-img { transform: translate(0px, 0); animation: swing 2s linear infinite; }
.flo3-img { transform: translate(0px, 0); z-index: 3; }
.flo4-img { transform: translate(0px, 0) rotate(0deg); animation: rotateCCW 8s linear infinite;}
.flo5-img { transform: translate(-300px, 50px); z-index: 1; }

/* swingåŠ¨ç”»ä¿æŒ */
@keyframes swing {
    0% { transform: translate(0px, 0) rotate(-8deg); }
    50% { transform: translate(0px, 0) rotate(8deg); }
    100% { transform: translate(0px, 0) rotate(-8deg); }
}

@keyframes rotateCCW {
    from { transform: translate(0px, 0) rotate(0deg); }
    to { transform: translate(0px, 0) rotate(-360deg); }
}


/* more æŒ‰é’® */
.more-btn {
    font-size: 1.8em;
    font-family: 'Baloo Tammudu', sans-serif;
    text-decoration: none;
    padding: 0 70px;
    height: 60px;
    line-height: 70px;
    border-radius: 50px;
    background-color: #717171;
    color: white;
    text-align: center;
    box-shadow: 5px 5px 0 #FFFFFF;
    margin-bottom: 100px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.more-btn:hover {
    transform: scale(1.00);
    box-shadow: 0 0 0 #FFFFFF;
}

/* Main Content */
.main-content {
    position: relative;
    z-index: 4;
    background-color: #1d1d1d;
    padding: 100px 5% 20px;
    margin-top: -100vh;
    box-shadow: 0px -1px 30px rgba(0, 0, 0, 0.3);
    border-top-left-radius: 50px;
    border-top-right-radius: 50px;
}

/* å››æ–¹å— 2x2 */
.square-grid {
    width: 100%;            /* å¯ä»¥æ˜¯å›ºå®šå®½åº¦ï¼Œæ¯”å¦‚ 800px */
    max-width: 900px;       /* æœ€å¤§å®½åº¦ */
    aspect-ratio: 1 / 1;    /* ä¿æŒæ­£æ–¹å½¢ */
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* 2åˆ— */
    grid-template-rows: repeat(2, 1fr);    /* 2è¡Œ */
    gap: 30px;              /* æ–¹å—é—´è· */
    margin: 0 auto 100px;   /* å±…ä¸­å¹¶åŠ ä¸‹é—´è· */
}


.square-grid .square {
    background: #717171;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: clamp(1em, 3vw, 2em); /* è‡ªåŠ¨ç¼©æ”¾å­—ä½“ */
    border-radius: 20px;
    box-shadow: 0px 8px 0 #D9D9D9;
    margin-bottom: 10px;
    /* å¯é€‰ï¼šæ•´ä½“ç¼©æ”¾ */
    transform-origin: center;
}

.square-wrapper {
    display: flex;             /* ä½¿ç”¨ Flexbox */
    flex-direction: row;       /* æ°´å¹³æ’åˆ— */
    justify-content: space-between; /* ä¸¤ç«¯å¯¹é½ï¼Œå¯æ ¹æ®éœ€æ±‚æ”¹æˆ center */
    align-items: center;       /* å‚ç›´å±…ä¸­ */
    gap: 10px;                 /* å­å…ƒç´ é—´è· */
     /* æ ¹æ®éœ€è¦è®¾ç½®åº•éƒ¨é—´è· */
    width: 100%;
    max-width: 200px;
    height: 100%
}


.square-wrapper {
    display: flex;
    flex-direction: row;       /* æ°´å¹³æ’åˆ— */
    justify-content: space-between; 
    align-items: center;       
    gap: 5%;                 
    width: 100%;               /* å®¹å™¨å æ»¡çˆ¶å…ƒç´  */
    max-width: 600px;          /* å¯æ ¹æ®éœ€è¦è°ƒæ•´ */
    margin: 0 auto;


}

#capsule-box, #date {
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #717171;
    border-radius: 20px;           /* ç›¸å¯¹åœ†è§’ */
    box-shadow: 0px 8px 0 #D9D9D9; /* ç›¸å¯¹é˜´å½± */
    flex: 1 1 40%;                /* è‡ªé€‚åº”å®½åº¦ï¼šå çˆ¶å…ƒç´ æ¯”ä¾‹ */
    height: auto;                 /* é«˜åº¦éšå†…å®¹æˆ–å®½åº¦å˜åŒ– */
    aspect-ratio: 0.489 / 1;        /* é«˜å®½æ¯”ä¿æŒé•¿æ–¹å½¢ */
    min-width: 80px;              /* æœ€å°å®½åº¦ä¿è¯å†…å®¹æ˜¾ç¤º */
    min-height: 220px;            /* æœ€å°é«˜åº¦ */
}

/* å†…éƒ¨ capsule æŒ‰é’®è‡ªé€‚åº” */
#capsule {
    width: 30%;
    height: 80%;
}


#circleContainer {
  width: 100%;
  height: 100%;
  transform-origin: center center;
  transition: transform 0.3s ease;
}


#flip-box {
  position: relative;
  overflow: hidden;
  width: 100%;
  height: auto;
  font-size: clamp(0.8em, 2vw, 1.5em); /* æ–‡å­—ç¼©æ”¾ */
}

#flip-box .square-back {
  background-color: #D9D9D9;
  font-family: 'Klee One', cursive;
  color: white;
  padding: 10px;
  box-sizing: border-box;
  border-radius: 20px;
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;

}

#flip-box .square-front {
  width: 100%;
  height: 100%;
  background-color: #717171;
  position: absolute;
  top: 0;
  left: 0;
  clip-path: polygon(
    0% 0%,
    100% 0%,
    100% 80%,
    80% 100%,
    0% 100%
  );
  transition: clip-path 0.3s ease;
  overflow: hidden;
  border-radius: 20px;
}



.arrow-group {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(1);
  transform-origin: center;
  transition: transform 0.3s ease;
}



#flip-box .arrow {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 8px;
  height: 120px;
  background-color: white;
  transform: translate(-50%, -50%) rotate(-45deg);
  border-radius: 5px;
}

#flip-box .arrow::after {
  content: "";
  position: absolute;
  top: 5px;
  left: -35px;
  width: 70px;
  height: 70px;
  border-left: 8px solid white;
  border-top: 8px solid white;
  transform: rotate(45deg);
  border-radius: 4px;
}

#flip-box .triangle {
  position: absolute;
  width: 7%;
  height: 7%;
  border-left: 80px solid transparent;
  border-top: 80px solid #F4DFCB;
  transform: scaleX(-1);
  pointer-events: none;
  right: 0;
  bottom: 0;
  transition: border-width 0.3s ease;
  border-top-right-radius: 20px; /* ä¸‰è§’å·¦ä¸Šè§’åœ†è§’ */
  box-shadow: 4px -4px 10px rgba(0, 0, 0, 0.3);

}

.square-back p {
    position: relative;       /* ç›¸å¯¹å®šä½ */
    left: 40px;               /* å¾€å³åç§» */
    margin: 10px 0 20px 60px; /* ä¸Š10pxï¼Œä¸‹20pxï¼Œå·¦20px */
    font-size: clamp(1em, 1vw, 2em); 
    margin-bottom: 90px;
    margin-top: 30px;
}

.square-back b {
    position: relative;
    right: 40px;              /* å¾€å·¦åç§» */
    white-space: nowrap;
    text-overflow: ellipsis;
    margin: 10px 0 10px 0;    /* ä¸Š20pxï¼Œä¸‹10px */
    font-size: clamp(1em, 1vw, 2em); 
    margin-bottom: 30px;
}

/* å¶æ•°æ®µè½é å·¦ï¼Œå¥‡æ•°æ®µè½é å³ */
.square-back p:nth-of-type(odd) {
    text-align: left;
    margin-left: 20px;
}
.square-back p:nth-of-type(even) {
    text-align: right;
    margin-right: 20px;
}

.square-back b:nth-of-type(odd) {
    text-align: left;
    margin-left: 20px;
}
.square-back b:nth-of-type(even) {
    text-align: right;
    margin-right: 20px;
}


.horizontal-scroll-section {
    position: relative;
    width: calc(100% + 10%); /* è¡¥ä¸Šçˆ¶å…ƒç´ å·¦å³ padding (5% + 5%) */
    margin-left: -5%;         /* æŠµæ¶ˆçˆ¶å…ƒç´ å·¦ padding */
    margin-right: -5%;        /* æŠµæ¶ˆçˆ¶å…ƒç´ å³ padding */
    height: 80vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    margin-bottom: 100px;
    overflow: hidden;
    transform-origin: top center;
    transition: transform 0.3s ease;
    will-change: transform;
}

/* æ°´å¹³æ»‘åŠ¨å®¹å™¨ */
.horizontal-scroll-container {
    width: 100%;
    height: 100%;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
    scroll-snap-type: x mandatory;
}

.horizontal-scroll-container::-webkit-scrollbar {
    display: none;
}

.horizontal-scroll-content {
    display: inline-flex;
    height: 100%;
    gap: .2%;
    align-items: center;
    transform-origin: center center;
    transition: transform 0.3s ease;
}

/* å¡ç‰‡å¤§å°ä¿æŒ16:9æ¯”ä¾‹ */
.horizontal-item {
    flex: 0 0 auto;
    width: 1000px; /* é»˜è®¤æ¡Œé¢å®½åº¦ */
    aspect-ratio: 16/9;
    background: #444;
    border-radius: 15px;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition: transform 0.3s ease, opacity 0.03s ease;
    scroll-snap-align: center;
}

.horizontal-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.horizontal-item.active {
    transform: scale(1.05);
}

.skills-container {
    width: 80%;
    max-width: 900px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin: 0 auto;
    margin-bottom: 100px;
  }

  .skill-box {
    display: flex;
  flex-direction: column;
  background-color: #2d2d2d;
  border: 2px solid #444;
  padding: 20px 30px;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.3s ease;
  }

  .skill-box:hover {
    background-color: #3d3d3d;
  }

  .skill-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .skill-name {
    font-size: clamp(.8rem, 1.4vw, .9rem); /* æœ€å°1remï¼Œæœ€å¤§1.2remï¼Œä¸­é—´éšå±å¹•å®½åº¦å˜åŒ– */
  font-weight: bold;
  color: #ffffff;
  }

  .time {
    text-align: right;  /* é å³å¯¹é½ */
    min-width: 80px;    /* ä¿è¯ç¼©å°æ—¶ä¸æŒ¤åˆ°å·¦è¾¹ */
    font-family: 'Courier New', monospace;
    color: #ffffff;
    font-size: clamp(0.9rem, 1.2vw, 1rem); /* éšå±å¹•ç¼©æ”¾ */
  }

  /* å±•å¼€å†…å®¹ */
  .details {
    display: none;
    flex-direction: column;
    margin-top: 15px;
    border-top: 1px solid #ccc;
    padding-top: 10px;
    color: #555;
  }

  .details.open {
    display: flex;
    animation: fadeIn 0.4s ease;
  }

  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(-5px);}
    to {opacity: 1; transform: translateY(0);}
  }

  .skill-details-container {
    display: flex;
    justify-content: space-between;
    gap: 20px;
  }

  .skill-list {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .skill-list div {
  font-size: clamp(.8rem, 1.4vw, .9rem);
  color: #d0d0d0;
}



  .skill-time-right {
    display: flex;
  flex-direction: column;
  justify-content: center; /* å‚ç›´å±…ä¸­ */
  padding: 10px 0; /* ä¸Šä¸‹ç•™ç™½ */
  text-align: right;
  }

  .skill-time-right .active-since {
    font-family: 'Courier New', monospace;
    margin-bottom: 2px;
    font-size: clamp(0.8rem, 1.2vw, .9rem);
    color: #ffffff;

  }

  .skill-time-right .full-time {
    font-weight: bold;
    font-size: clamp(0.9rem, 1.2vw, .9rem);
    color: #f6f6f6;


  }
#ball-box, #coin-box {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

/* å°çƒæ ·å¼ */
.ball {
    position: absolute;
    width: 40px;
    height: 40px;
    border-radius: 50%;
  }
.touch-text{
    font-family: 'Baloo Tammudu', sans-serif;
    font-size: clamp(1em, 2.5vw, 2em);
}

  .paddle {
    position: absolute;
    width: 30px;
    height: 10px;
    background-color: transparent;
    border-radius: 5px;
    display: none;
    transform: translate(-50%, -50%);
  }

  .coin-container {
    width: 80%;   /* ç¡¬å¸ç›¸å¯¹æ–¹å—å¤§å° */
    height: 80%;
    display: flex;
    justify-content: center;
    align-items: center;
}

    .coin {
        width: 100%;
    height: 100%;
    max-width: 250px; /* æœ€å¤§ç¡¬å¸å°ºå¯¸ */
    max-height: 250px;
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.6s ease;
        cursor: pointer;
    }

.coin .front,
.coin .back {
    font-family: 'Baloo Tammudu', sans-serif;
    font-size: clamp(1em, 2.5vw, 2em);
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    backface-visibility: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    color: white;
    user-select: none;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
    font-weight: bold;
    color: white;
}

.coin .front { background: #FFE3BE; color: #E14040; /* æ­£é¢æ–‡å­—ç°è‰² */}
.coin .back { background: #F26063; transform: rotateY(180deg);color: #FFEBD1; /* èƒŒé¢æ–‡å­—ç™½è‰² */ }

/* é˜´å½±éšè— */
.shadow { display: none; }


#coin:hover {
    transform: scale(1.1);
    transition: transform 0.3s ease;
}

/* ---- èƒ¶å›ŠæŒ‰é’® ---- */
.capsule-button {
    width: 90px;
    height: 320px;
    border: 4px solid rgba(255, 255, 255, 0.8);
    border-radius: 50px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    cursor: pointer;
    background: transparent;
    position: relative;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .capsule-button:hover {
    transform: translateY(-5px);

  }

  .top-half, .bottom-half {
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: clamp(1.5rem, 5vw, 2.8rem);
    font-weight: 300;
    user-select: none;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    min-height: 0;
    flex-shrink: 0;
    flex: 1;
  }

  .top-half { 
    background-color: #1D1D1D; 
    color: white; 
  }
  
  .bottom-half { 
    background-color: white; 
    color: #1D1D1D; 
  }

  /* åˆå§‹çŠ¶æ€ - å„å ä¸€åŠ */
  .initial .top-half,
  .initial .bottom-half {
    flex: 1 0 50%;
  }

  /* ç™½è‰²å æ®3/4çŠ¶æ€ */
  .white-three-quarter .top-half {
    flex: 1 0 25%;
  }
  
  .white-three-quarter .bottom-half {
    flex: 3 0 75%;
  }

  /* ç™½è‰²å®Œå…¨è¦†ç›–çŠ¶æ€ */
  .white-full .top-half {
    flex: 0 0 0;
    opacity: 0;
  }
  
  .white-full .bottom-half {
    flex: 1 0 100%;
  }

  /* é»‘è‰²å æ®3/4çŠ¶æ€ */
  .black-three-quarter .top-half {
    flex: 3 0 75%;
  }
  
  .black-three-quarter .bottom-half {
    flex: 1 0 25%;
  }

  /* é»‘è‰²å®Œå…¨è¦†ç›–çŠ¶æ€ */
  .black-full .top-half {
    flex: 1 0 100%;
  }
  
  .black-full .bottom-half {
    flex: 0 0 0;
    opacity: 0;
  }

  /* åœ†ç›˜æ ·å¼ */
.mask-container {
    width: 100%; /* è‡ªé€‚åº” square */
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
}



.month {
    position: absolute;
    left: 50%;
    top: 50%;
    transform-origin: center -90px;
    color: #717171;
    font-size: 14px;
    text-align: center;
    user-select: none;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: 'Be Vietnam Pro', sans-serif;
}

.month:hover {
    color: #ffffff;
    transform: scale(1.3);
}

.month.highlight {
    font-size: 18px;
    color: #ffffff;
    font-weight: bold;
}
.circle-container {
    position: relative;
    width: 220px;
    height: 220px;
    left: 80px; 
}

#circleContainer {
    transform: scale(1.3); /* æ”¾å¤§ 1.3 å€ */
    transform-origin: center center;
}

/* Footer */
.foot-container {
    font-size: 80%;
    font-weight: bold;
    color: white;
    background-color: #1d1d1d;
    position: relative;
  z-index: 10;
  width: 100%;
      height: 100%;
}
.footer-spacer {
  background-color: #1d1d1d;


}

/* â€œBack to topâ€ é“¾æ¥å¯å•ç‹¬ä½¿ç”¨ */
.foot-container .back-to-top {
    display: block;
    text-align: center;
    margin-bottom: 80px;
    color: grey;
    text-decoration: none;
    font-size: 0.8em;
    width: 100%;


}

/* --- Sidebar layout --- */
.sidebar {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    width: 100%;
    color: white;
    padding-left: 20px;
}

.sidebar .row {
    display: flex;
    width: 100%;
    margin-bottom: 0;

}

.sidebar .col {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    color: white;

}

.sidebar a {
    text-decoration: none;
    height: 2.2vh;
    margin: 0;
    color: white;
    transition: color 0.2s ease;
}

.sidebar a:hover {
    color: gray;
    text-decoration: none;
}

.sidebar p {
    margin: 0;
    height: 2.3vh;
}

/* --- å¸ƒå±€å¾®è°ƒ --- */
.sidebar .col > a[href="imprint.html"] {
    margin-top: 20px;
}

/* --- Footer é“¾æ¥åˆ†å¸ƒ --- */
.extra-links {
    display: flex;
    justify-content: space-between;
    width: 100%;
    bottom: 0;
    left: 0;
}

.extra-links a {
    margin: 2px 0;
    color: gray;
}

/* --- ä¸åŒåˆ—çš„æ¯”ä¾‹ä¸é—´è· --- */
.sidebar .row .col:nth-child(2) {
    flex: 0 0 16%;
    padding-left: 31%;
}

.sidebar .row .col:nth-child(3) {
    padding-bottom: 20px;
}
.sidebar a,
  .sidebar p,
  .foot-container p,
  .extra-links a {
      font-size: clamp(.9em, 1.4vw, .8em);  /* âœ… comingtothetree å­—ä½“æ¯”ä¾‹ */
      color: white;
  }

@media (max-width: 1200px) {
    .flo-img {
        height: 60%;
    }
    .flo1-img, .flo2-img {
        transform: translate(80px, -40px) scale(0.9);
    }
    .flo3-img {
        transform: translate(0, 0) scale(0.9);
    }
    .flo4-img, .flo5-img {
        transform: translate(100px, 40px) scale(0.9);
    }
    .arrow-group {
    transform: translate(-50%, -50%) scale(0.8);
  }
  #flip-box .triangle {
    transform: scaleX(-1) scale(1);
  }
  .square-back p, .square-back b {
        margin-top: 5%; /* å¾€ä¸‹æŒª */
    }
    #circleContainer {
    transform: scale(1.2);
  }
  .horizontal-item {
        width: 700px;
    }
    .horizontal-scroll-section {
        height: 60vh;
        margin-bottom: 50px;
    }
    .hero-icons {
    top: calc(100vh + 400px);

    height: 180vh;
}
    
}
@media (max-width: 768px) {

  .navbar a {
    font-size: 2.5vw;
      }

    .ball {
    width: 25px;
    height: 25px;
  }
    .arrow-group {
    transform: translate(-50%, -50%) scale(0.45);
  }


  /* ä¸‰è§’å½¢ç¿»é¡µåŒºåŸŸç¼©å°ï¼Œé˜²æ­¢æº¢å‡º */
  #flip-box .triangle {
    width: 0px;
  height: 0px;
  border-left: 80px solid transparent;
  }

  /* è°ƒæ•´ç®­å¤´å¤§å°æ¯”ä¾‹ */
  #flip-box .arrow {
    height: 90px;
  }
    .square-back p, .square-back b {
        margin-top: 50%; /* å¾€ä¸‹æŒª */
    } 
    #circleContainer {
    transform: scale(0.9);
  }
    .horizontal-scroll-section {
    height: 55vh;                /* ç¨å¾®é™ä½é«˜åº¦ */
    transform: scale(1);      /* æ•´ä½“ç¼©å°ä¸€ç‚¹ */
    transform-origin: center center;
    margin-bottom: 20px;
    margin-top: 0px;
  }
  .horizontal-scroll-content { gap: 0; }

  /* é˜²æ­¢å¤šå¡ç‰‡éƒ¨åˆ†éœ²å‡ºï¼Œç¡®ä¿åªæ»‘åŠ¨ä¸€å¼  */
  .horizontal-scroll-container {
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
    overscroll-behavior-x: contain; /* é˜²è¯¯è§¦è¾¹ç¼˜å›å¼¹ */
  }

  .horizontal-item {
    flex: 0 0 94vw;     /* ä¸€å±ä¸€å¼ ï¼ˆä¸¤è¾¹ç•™ä¸€ç‚¹ç‚¹å®‰å…¨è¾¹è·ï¼‰*/
    scroll-snap-align: center;
    will-change: transform;
  }

  .horizontal-item.active {
    transform: scale(1);
    opacity: 1;
  }

  /* é€‚é…å†…éƒ¨å†…å®¹ä¸å˜å½¢ */
  .horizontal-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

    .square-wrapper {
    position: relative;
    aspect-ratio: 1 / 1;
    width: 100%;
    height: auto;
    display: block;
    overflow: visible; /* é¿å…è£å‰ªå†…éƒ¨å†…å®¹ */
  }

  /* capsule-box å’Œ date å›ºå®šå°ºå¯¸ï¼Œå·¦å³å¹¶æ’ï¼Œé å³ä¸‹è§’ */
  #capsule-box,
  #date {
    position: absolute;
    width: 45%;            /* âœ… å›ºå®šå®½åº¦ */
    height: 90%;           /* âœ… å›ºå®šé«˜åº¦ */
    flex: none !important; /* ç¦æ­¢è¢« flex æ‹‰ä¼¸ */
    min-width: unset !important;
    min-height: unset !important;
    box-sizing: border-box;
  }

  /* capsule-box åœ¨å·¦ï¼Œç¨å‘å³åç§» */
  #capsule-box {
    right: calc(45% + 5% + 3%); /* âœ… dateå®½åº¦ + å¤–è¾¹è·5% + ä¸­é—´é—´è·3% */
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* date åœ¨å³ */
  #date {
    right: 0;
  }

  /* capsule æŒ‰é’®ä¿æŒæ¯”ä¾‹ */
  #capsule {
    width: 40%;
    height: 80%;
  }

  /* date çš„åœ†ç›˜ç¨å¾®ç¼©å°ä¸€ç‚¹é¿å…æº¢å‡º */
  #date .circle-container {
    transform: scale(0.7);
    left: 90%;
    transform-origin: center;
  }
   .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-left: 2.1%;
      padding-right: 2.1%;
      padding-top: 20px;
      padding-bottom: 20px;
      background-color: transparent;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      font-size: smaller;
  }

  .navbar a {
      margin: 0 5px;
  }


  /* --- Footer ç»§æ‰¿ comingtothetree å¸ƒå±€ --- */
  .foot-container {
      font-size: 80%;
      font-weight: bold;
      margin-left: 0;
  }

  .sidebar .row {
      flex-direction: column;
      align-items: flex-start;
  }

  .sidebar .row .col {
      padding-left: 0;
      margin-left: 0;
      padding-bottom: 5%;
  }

  .sidebar .row .col:nth-child(2),
  .sidebar .row .col:nth-child(3) {
      padding-left: 0;
      margin-left: 0px;
  }

  .sidebar a,
  .sidebar p,
  .foot-container p,
  .extra-links a {
      font-size: 2.5vw;  /* âœ… comingtothetree å­—ä½“æ¯”ä¾‹ */
      color: white;
  }

  .back-to-top {
      display: block;
      text-align: center;
      margin-bottom: 80px;
      color: grey;
      text-decoration: none;
      font-size: 0.8em;
      width: 100%;
  }
  .sidebar .col:nth-child(3) a[href="uiux.html"],
  .sidebar .col:nth-child(3) a[href="publications.html"],
  .sidebar .col:nth-child(3) a[href="about.html"],
  .sidebar .col:nth-child(3) a[href="contact.html"] {
      display: none !important;
  }

  /* âœ… Footer æ‰€æœ‰æ–‡å­—æ”¹ä¸ºç™½è‰² */
  .foot-container p,
  .foot-container a,
  .sidebar p,
  .sidebar a {
      color: white !important;
      font-size: 2.5vw;
  }
  .foot-container {
      height: 120%;
} 
  .sidebar .col:nth-child(3) a[href="imprint.html"] {
    margin-top: -5px;
  }

  .skill-name,.time,.skill-time-right .active-since,.skill-list div,.skill-time-right .full-time {
    font-size: 3vw; /* æœ€å°1remï¼Œæœ€å¤§1.2remï¼Œä¸­é—´éšå±å¹•å®½åº¦å˜åŒ– */
  }
  .square-grid{
    margin-bottom: 0px;
  }
}

  /* ğŸ’» ä»…åœ¨å¤§å±å¹•ä¸Šè°ƒæ•´ horizontal-scroll-section å›¾ç‰‡å¤§å° */
@media (min-width: 2000px) {
  .horizontal-item {
    width: 1300px;
    height: auto;      /* âœ… é«˜åº¦è‡ªé€‚åº” */
  }
  .flo-container {
    padding-bottom: 5%;
  }
}




</style>
</head>
<body>

<!-- Header -->
<div class="navbar">
    <a href="index.html">Quan Yuan</a>
    <a href="publications.html">Publications</a>
    <a href="uiux.html">UX/UI</a>
    <a href="about.html">About</a>
</div>

<!-- Hero Section -->
<div class="hero">
    <div class="hero-back"></div>
    <div class="hero-icons">
        <img src="image/ux/light.png">
        <img src="image/ux/cam.png">
        <img src="image/ux/book.png">
        <img src="image/ux/coin.png">
        <img src="image/ux/light.png">
        <img src="image/ux/cam.png">
        <img src="image/ux/book.png">
        <img src="image/ux/coin.png">
        <img src="image/ux/light.png">
        <img src="image/ux/cam.png">
        <img src="image/ux/book.png">
        <img src="image/ux/coin.png">
        <img src="image/ux/light.png">
        <img src="image/ux/cam.png">
        <img src="image/ux/book.png">
        <img src="image/ux/coin.png">

    </div>
    <div class="hero-front">
        <div class="flo-container">
            <img src="image/ux/flo1.png" class="flo-img flo1-img">
        <div class="flo-wrapper flo2-wrapper">
            <img src="image/ux/flo2.png" class="flo-img flo2-img">
    </div>
            <img src="image/ux/flo3.png" class="flo-img flo3-img">
        <div class="flo-wrapper flo4-wrapper">
            <img src="image/ux/flo4.png" class="flo-img flo4-img">
    </div>
            <img src="image/ux/flo5.png" class="flo-img flo5-img">
        </div>
        <a href="https://www.figma.com/@yqstudios" target="_blank" class="more-btn">more</a>
    </div>
</div>

<!-- Main Content -->
<div class="main-content">
    <div class="square-grid">
        <div class="square" id="ball-box">
            <div class="touch-text">Bouncy Fun!</div>
        </div>        
        <div class="square" id="coin-box" style="position: relative;">
            <div class="coin-container">
                <div class="coin" id="coin">
                    <div class="front">Yes</div>
                    <div class="back">Nonono</div>
                </div>
                <div class="shadow" id="shadow"></div>
            </div>
        </div>
        <div class="square" id="flip-box">
    <div class="square-back">
        <b>
            è¢æ³‰çƒ­è¡·äºè§†è§‰è‰ºæœ¯ï¼Œè‡´åŠ›äºæ‰“é€ å…¼å…·ç‹¬ç‰¹å®¡ç¾ä¸äº’åŠ¨ä½“éªŒçš„ç•Œé¢ã€‚
        </b>
        <p>
            Quan Yuan is passionate about UX/UI and visual arts, creating interfaces with unique aesthetics and engaging experiences.
        </p>
        <b>
            è¢æ³‰çƒ­è¡·äºè§†è§‰è‰ºæœ¯ï¼Œè‡´åŠ›äºæ‰“é€ å…¼å…·ç‹¬ç‰¹å®¡ç¾ä¸äº’åŠ¨ä½“éªŒçš„ç•Œé¢ã€‚
        </b>
        <p>
            Quan Yuan is passionate about UX/UI and visual arts, creating interfaces with unique aesthetics and engaging experiences.
        </p>

    </div>
    <div class="square-front" id="flip-front">
        <div class="arrow-group">
    <div class="arrow"></div>
</div>
        <div class="triangle" id="flip-triangle"></div>
    </div>
</div>
        <div class="square-wrapper">
        <div class="square" id="capsule-box">
  <div class="capsule-button initial" id="capsule">
    <div class="top-half">+</div>
    <div class="bottom-half">-</div>
  </div>
</div>
<div class="square" id="date">
        <div class="mask-container">
            <div class="circle-container" id="circleContainer">
                <div class="month">Dec</div>
                <div class="month">Nov</div>
                <div class="month">Oct</div>
                <div class="month">Sep</div>
                <div class="month">Aug</div>
                <div class="month">Jul</div>
                <div class="month">Jun</div>
                <div class="month">May</div>
                <div class="month">Apr</div>
                <div class="month">Mar</div>
                <div class="month">Feb</div>
                <div class="month">Jan</div>
            </div>
        </div>
    </div>
    </div>
</div>

<div class="horizontal-scroll-section" id="horizontalSection">
    <div class="horizontal-scroll-container" id="horizontalContainer">
        <div class="horizontal-scroll-content" id="horizontalContent">
            <!-- é¡¹ç›®å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
        </div>
    </div>
</div>

    <div class="skills-container">

  <!-- Studio Lighting & Photography -->
  <div class="skill-box" data-start="2017-11-18T17:00:00" data-skills="Continuous & strobe lightingï½œStill-life & conceptual photographyï½œDigital & film camera operationï½œLens selection & exposure controlï½œComposition & visual balance">
    <div class="skill-header">
      <div class="skill-name">Photography & Studio Lighting</div>
      <div class="time"></div>
    </div>
    <div class="details">
      <div class="skill-details-container">
        <div class="skill-list"></div>
        <div class="skill-time-right">
          <div class="active-since"></div>
          <div class="full-time"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Image Retouching & Color Management -->
  <div class="skill-box" data-start="2019-01-20T00:00:00" data-skills="Adobe Photoshopï½œCapture Oneï½œLightroomï½œNon-destructive editingï½œColor calibration & profilingï½œPrint color accuracyï½œTonal correction & texture preservation">
    <div class="skill-header">
      <div class="skill-name">Image Retouching & Color Management</div>
      <div class="time"></div>
    </div>
    <div class="details">
      <div class="skill-details-container">
        <div class="skill-list"></div>
        <div class="skill-time-right">
          <div class="active-since"></div>
          <div class="full-time"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Graphic Design -->
  <div class="skill-box" data-start="2021-10-01T00:00:00" data-skills="Adobe InDesignï½œIllustratorï½œLayout & typographyï½œVisual identity designï½œPromotional & exhibition materialsï½œComposition & hierarchy in design">
    <div class="skill-header">
      <div class="skill-name">Graphic Design</div>
      <div class="time"></div>
    </div>
    <div class="details">
      <div class="skill-details-container">
        <div class="skill-list"></div>
        <div class="skill-time-right">
          <div class="active-since"></div>
          <div class="full-time"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Visual Storytelling & Art Direction -->
  <div class="skill-box" data-start="2023-09-02T00:00:00" data-skills="Concept developmentï½œSet design & stylingï½œSymbolic & emotional narrative buildingï½œVisual consistencyï½œArt direction for photography projects">
    <div class="skill-header">
      <div class="skill-name">Visual Storytelling & Art Direction</div>
      <div class="time"></div>
    </div>
    <div class="details">
      <div class="skill-details-container">
        <div class="skill-list"></div>
        <div class="skill-time-right">
          <div class="active-since"></div>
          <div class="full-time"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Exhibition Curation & Presentation -->
  <div class="skill-box" data-start="2022-03-15T00:00:00" data-skills="Concept & theme developmentï½œSpatial layout planningï½œLighting arrangementï½œInstallation designï½œVisual flow & audience engagementï½œExhibition documentation">
    <div class="skill-header">
      <div class="skill-name">Exhibition Curate & Presentation</div>
      <div class="time"></div>
    </div>
    <div class="details">
      <div class="skill-details-container">
        <div class="skill-list"></div>
        <div class="skill-time-right">
          <div class="active-since"></div>
          <div class="full-time"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Book Layout & Print Publishing -->
  <div class="skill-box" data-start="2024-04-20T00:00:00" data-skills="Book & catalog designï½œPrint formattingï½œPaper & binding selectionï½œPrepress workflowï½œImage sequencingï½œPublication quality control">
    <div class="skill-header">
      <div class="skill-name">Book Layout & Print Publishing</div>
      <div class="time"></div>
    </div>
    <div class="details">
      <div class="skill-details-container">
        <div class="skill-list"></div>
        <div class="skill-time-right">
          <div class="active-since"></div>
          <div class="full-time"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Imaging Quality Assurance -->
  <div class="skill-box" data-start="2024-10-12T00:00:00" data-skills="ICC profilingï½œSoft-proofingï½œImage sharpness evaluationï½œColor consistencyï½œPrinting test & refinementï½œFile management for digital & print output">
    <div class="skill-header">
      <div class="skill-name">Imaging Quality Assurance</div>
      <div class="time"></div>
    </div>
    <div class="details">
      <div class="skill-details-container">
        <div class="skill-list"></div>
        <div class="skill-time-right">
          <div class="active-since"></div>
          <div class="full-time"></div>
        </div>
      </div>
    </div>
  </div>


  <!-- UI & UX -->
<div class="skill-box" data-start="2025-03-01T00:00:00" data-skills="Responsive web designï½œHTML, CSS & JavaScriptï½œInteractive visual layoutï½œPortfolio site designï½œUser experience optimizationï½œVisual coherence & accessibility">
  <div class="skill-header">
    <div class="skill-name">UI & UX</div>
    <div class="time"></div>
  </div>
  <div class="details">
    <div class="skill-details-container">
      <div class="skill-list"></div>
      <div class="skill-time-right">
        <div class="active-since"></div>
        <div class="full-time"></div>
      </div>
    </div>
  </div>
</div>

</div>
</div>


<!-- Footer section -->
    <div class="foot-container">
        <a href="#top" class="back-to-top">Back to top</a>
        <div style="display: flex; align-items: flex-start; margin-bottom: -10px;padding-left: 20px;">
            <p>Quan Yuan Photographer </p>
        </div>
        <div class="sidebar">
            <div class="row">
                <div class="col" style="padding-top: 10px;">
                    <p>q@yqstudios.com</p>
                    <p>New York, NY</p>
                </div>
                <div class="col">
                    <a href="mailto:q@yqstudios.com">Email</a>
                    <a href="https://www.instagram.com/nisen12/?img_index=1" target="_blank">Instagram</a>
                    <a href="https://www.linkedin.com/in/quanyuan/" target="_blank">LinkedIn</a>
                </div>
                <div class="col">
                    <a href="uiux.html">UX/UI â†’</a>
                    <a href="publications.html">Publications â†’</a>
                    <a href="about.html">About â†’</a>
                    <a href="contact.html">Contact â†’</a>
                    <a href="imprint.html">All rights reserved by Quan Yuan</a>
                </div>
            </div>
        </div>
    </div>
  

<script>

const heroFront = document.querySelector('.hero-front');
const icons = document.querySelectorAll('.hero-icons img');
const heroIcons = document.querySelector('.hero-icons');
const flo1 = document.querySelector('.flo1-img');
const flo2 = document.querySelector('.flo2-wrapper');
const flo3 = document.querySelector('.flo3-img');
const flo4 = document.querySelector('.flo4-wrapper');
const flo5 = document.querySelector('.flo5-img');

/* --- æ»šåŠ¨åŠ¨ç”» --- */
window.addEventListener('scroll', () => {
    const scrollY = window.scrollY;

    // front ç¼©æ”¾ + é¡ºæ—¶é’ˆæ—‹è½¬
    const scale = Math.max(0.7, 1 - scrollY / 1200);
    const rotate = Math.min(scrollY / 20, 5);
    heroFront.style.transform = `translate(-50%, -50%) scale(${scale}) rotate(${rotate}deg)`;

    // hero-icons è·Ÿéšä¸Šç§»
    heroIcons.style.transform = `translateY(-${scrollY * 0.7}px)`;

    // å›¾æ ‡å·¦å³äº¤é”™æ»‘åŠ¨
    icons.forEach((icon, index) => {
        const direction = (index % 2 === 0 ? -1 : 1);
        const offset = scrollY * 0.25 * direction;
        icon.style.transform = `translateX(${offset}px)`;
    });
});

let currentOffset = 0;
let targetOffset = 0;

function adjustFloPositionSmooth() {
    const width = window.innerWidth;

    /* --- 1ï¸âƒ£ æ¡Œé¢ç«¯ä¿æŒé™æ­¢ --- */
    if (width >= 1200) {
        flo1.style.transform = 'translate(250px, 0) scale(1)';
        flo2.style.transform = 'translate(0, 0) scale(1) rotate(0deg)';
        flo3.style.transform = 'translate(0, 0) scale(1)';
        flo4.style.transform = 'translate(0, 0) scale(1) rotate(0deg)';
        flo5.style.transform = 'translate(-300px, -20px) scale(1)';
        document.querySelector('.flo-container').style.gap = '100px';
        return;
    }

    let scaleFactor = 1;
    if (width < 1600 && width >= 1200) scaleFactor = 0.9;
    else if (width < 1200 && width >= 900) scaleFactor = 0.8;
    else if (width < 900 && width >= 700) scaleFactor = 0.7;
    else if (width < 700) scaleFactor = 0.65;

    let phoneOffsetX = 0;
    if (width <= 600) phoneOffsetX = 170;

    targetOffset = 400 * (1 - scaleFactor);
    const baseX = 250 * scaleFactor;
    const flo1X = baseX;
    const flo5X = -baseX;

    const maxGap = 50;
    const minGap = 0;
    const gap = minGap + (maxGap - minGap) * scaleFactor;
    document.querySelector('.flo-container').style.gap = `${gap}px`;

    const flo5ExtraX = -45;
    const flo5ExtraY = -40;
    const flo1ExtraX = 40;
    const flo1ExtraY = 30;
    const flo2ExtraX = 30;
    const flo2ExtraY = 30;

    function animate() {
        currentOffset += (targetOffset - currentOffset) * 0.1;

        flo1.style.transform = `translate(${flo1X + phoneOffsetX + flo1ExtraX}px, ${currentOffset + flo1ExtraY}px) scale(${scaleFactor})`;
        flo2.style.transform = `translate(${phoneOffsetX + flo2ExtraX}px, ${currentOffset + flo2ExtraY}px) scale(${scaleFactor}) rotate(0deg)`; 
        flo3.style.transform = `translate(0, 0) scale(${scaleFactor})`; 
        flo4.style.transform = `translate(${-phoneOffsetX}px, ${-currentOffset}px) scale(${scaleFactor}) rotate(0deg)`; 
        flo5.style.transform = `translate(${flo5X - phoneOffsetX + flo5ExtraX}px, ${-currentOffset + flo5ExtraY}px) scale(${scaleFactor})`;

        if (Math.abs(currentOffset - targetOffset) > 0.1) {
            requestAnimationFrame(animate);
        }
    }

    animate();
}

adjustFloPositionSmooth();
window.addEventListener('resize', adjustFloPositionSmooth);



/* --- å°çƒéƒ¨åˆ† --- */
const box = document.getElementById('ball-box');
const boxWidth = box.clientWidth;
const boxHeight = box.clientHeight;
const ballSize = 30;
const balls = [];

// åˆ›å»ºæŒ¡æ¿
const paddle = document.createElement('div');
paddle.className = 'paddle';
box.appendChild(paddle);

// æŒ¡æ¿è·Ÿéšé¼ æ ‡
box.addEventListener('mousemove', e => {
  const rect = box.getBoundingClientRect();
  paddle.style.left = e.clientX - rect.left + 'px';
  paddle.style.top = e.clientY - rect.top + 'px';
  paddle.style.display = 'block';
});
box.addEventListener('mouseleave', () => paddle.style.display='none');

// åˆ›å»ºçƒ

const ballColors = ['#F9692F', '#75A175', '#83C1FC','#ECA0FD','#F4DFCB'];
let ballCount = 0;

function createBall() {
  const ball = document.createElement('div');
  ball.className = 'ball';
  // è®¾ç½®é¢œè‰²
  ball.style.backgroundColor = ballColors[ballCount % ballColors.length];
  ballCount++;

  box.appendChild(ball);
  const x = Math.random() * (boxWidth - ballSize);
  const y = Math.random() * (boxHeight - ballSize);
  const speed = 2 + Math.random() * 2; // æ’å®šé€Ÿåº¦
  const angle = Math.random() * 2 * Math.PI;
  const vx = Math.cos(angle) * speed;
  const vy = Math.sin(angle) * speed;
  balls.push({element: ball, x, y, vx, vy, speed});
}

const touchText = document.querySelector('.touch-text');

function checkTextCollision(ball) {
  const rect = touchText.getBoundingClientRect();
  const boxRect = box.getBoundingClientRect();

  const textX = rect.left - boxRect.left;
  const textY = rect.top - boxRect.top;
  const textWidth = rect.width;
  const textHeight = rect.height;

  if (
    ball.x + ballSize > textX &&
    ball.x < textX + textWidth &&
    ball.y + ballSize > textY &&
    ball.y < textY + textHeight
  ) {
    // åå¼¹æ–¹å‘ï¼šä¸Šä¸‹æˆ–è€…å·¦å³ï¼ŒæŒ‰æœ€çŸ­ç©¿é€è·ç¦»åå¼¹
    const overlapX1 = ball.x + ballSize - textX;      // å·¦ä¾§é‡å 
    const overlapX2 = textX + textWidth - ball.x;     // å³ä¾§é‡å 
    const overlapY1 = ball.y + ballSize - textY;      // ä¸Šä¾§é‡å 
    const overlapY2 = textY + textHeight - ball.y;    // ä¸‹ä¾§é‡å 
    const minOverlap = Math.min(overlapX1, overlapX2, overlapY1, overlapY2);

    if (minOverlap === overlapX1) ball.vx = -Math.abs(ball.vx);
    else if (minOverlap === overlapX2) ball.vx = Math.abs(ball.vx);
    else if (minOverlap === overlapY1) ball.vy = -Math.abs(ball.vy);
    else if (minOverlap === overlapY2) ball.vy = Math.abs(ball.vy);
  }
}
// æ’å¢™
function checkWallCollision(ball) {
  const maxX = box.clientWidth - ball.element.offsetWidth;
  const maxY = box.clientHeight - ball.element.offsetHeight;

  if(ball.x <= 0) { 
    ball.x = 0; 
    ball.vx = Math.abs(ball.vx);
  }
  if(ball.x >= maxX) { 
    ball.x = maxX; 
    ball.vx = -Math.abs(ball.vx);
  }
  if(ball.y <= 0) { 
    ball.y = 0; 
    ball.vy = Math.abs(ball.vy);
  }
  if(ball.y >= maxY) { 
    ball.y = maxY; 
    ball.vy = -Math.abs(ball.vy);
  }
}

// æŒ¡æ¿ç¢°æ’
function checkPaddleCollision(ball) {
  if(paddle.style.display === 'block') {
    const paddleX = parseFloat(paddle.style.left) - paddle.offsetWidth/2;
    const paddleY = parseFloat(paddle.style.top) - paddle.offsetHeight/2;
    if (
      ball.x + ballSize > paddleX &&
      ball.x < paddleX + paddle.offsetWidth &&
      ball.y + ballSize > paddleY &&
      ball.y < paddleY + paddle.offsetHeight
    ) {
      // æ ¹æ®å‡»ä¸­ä½ç½®è°ƒæ•´æ–¹å‘
      const angle = Math.atan2(ball.y - (paddleY + paddle.offsetHeight/2),
                               ball.x - (paddleX + paddle.offsetWidth/2));
      ball.vx = Math.cos(angle) * ball.speed;
      ball.vy = Math.sin(angle) * ball.speed;
    }
  }
}

// çƒäº’æ’
function checkBallCollision(b1, b2) {
  const dx = b2.x - b1.x;
  const dy = b2.y - b1.y;
  const distance = Math.sqrt(dx*dx + dy*dy);
  if(distance < ballSize && distance !== 0) {
    const nx = dx / distance;
    const ny = dy / distance;
    // äº¤æ¢é€Ÿåº¦æ–¹å‘
    const v1 = {x: b1.vx, y: b1.vy};
    const v2 = {x: b2.vx, y: b2.vy};
    b1.vx = v2.x;
    b1.vy = v2.y;
    b2.vx = v1.x;
    b2.vy = v1.y;
    // è°ƒæ•´ä½ç½®é¿å…é‡å 
    const overlap = ballSize - distance + 0.1;
    b1.x -= nx * overlap/2;
    b1.y -= ny * overlap/2;
    b2.x += nx * overlap/2;
    b2.y += ny * overlap/2;
  }
}

// åŠ¨ç”»å¾ªç¯
function animateBalls() {
  balls.forEach((ball, i) => {
    ball.x += ball.vx;
    ball.y += ball.vy;

    checkWallCollision(ball);
    checkPaddleCollision(ball);
    checkTextCollision(ball);

    for(let j=i+1; j<balls.length; j++) checkBallCollision(ball, balls[j]);

    ball.element.style.left = ball.x + 'px';
    ball.element.style.top = ball.y + 'px';
  });
  requestAnimationFrame(animateBalls);
}

// åˆå§‹åŒ– 5 ä¸ªçƒ
for(let i=0; i<5; i++) createBall();
animateBalls();

// ç¡¬å¸äº¤äº’
const coin = document.getElementById('coin');
const shadow = document.getElementById('shadow');
let currentRotation = 0;
let isHover = false;

coin.addEventListener('mouseenter', () => { isHover = true; updateCoinTransform(); });
coin.addEventListener('mouseleave', () => { isHover = false; updateCoinTransform(); });

coin.addEventListener('click', () => {
    const randomTurns = Math.floor(Math.random() * 5) + 2;
    currentRotation += 180 * randomTurns;
    updateCoinTransform();

});

function updateCoinTransform() {
    const scale = isHover ? 1.1 : 1;
    coin.style.transform = `rotateY(${currentRotation}deg) scale(${scale})`;
}

/* -------------------- ç¡¬å¸è‡ªé€‚åº”æ–¹å— -------------------- */
const coinBox = document.getElementById('coin-box');
const coinContainer = coinBox.querySelector('.coin-container');

function adjustCoinSize() {
    const size = Math.min(coinBox.clientWidth, coinBox.clientHeight) * 0.6;
    coinContainer.style.width = size + 'px';
    coinContainer.style.height = size + 'px';
}

window.addEventListener('resize', adjustCoinSize);
adjustCoinSize();

/* -------------------- ç¿»é¡µ -------------------- */
const flipFront = document.getElementById('flip-front');
const flipTriangle = document.getElementById('flip-triangle');
let dragging = false;
let startX = 0;
let startY = 0;

const initBottom = 80;
const initRight = 80;

flipFront.addEventListener('mousedown', e => {
  const rect = flipFront.getBoundingClientRect();
  if (e.clientX > rect.right - 120 && e.clientY > rect.bottom - 120) {
    dragging = true;
    flipFront.style.transition = 'none';
    flipTriangle.style.transition = 'none';
    startX = e.clientX;
    startY = e.clientY;
  }
});

document.addEventListener('mouseup', () => {
  if (dragging) {
    dragging = false;
    flipFront.style.transition = 'clip-path 0.3s ease';
    flipTriangle.style.transition = 'border-width 0.3s ease, right 0.3s ease, bottom 0.3s ease';
    resetFlip();
  }
});

document.addEventListener('mousemove', e => {
  if (!dragging) return;

  const rect = flipFront.getBoundingClientRect();
  let dx = startX - e.clientX;
  let dy = startY - e.clientY;
  const move = Math.max(dx, dy);
  dx = dy = move;

  let rightPercent = 100 - (dx / rect.width * 100);
  let bottomPercent = 100 - (dy / rect.height * 100);
  rightPercent = Math.min(Math.max(rightPercent, 0), 100);
  bottomPercent = Math.min(Math.max(bottomPercent, 0), 100);

  flipFront.style.clipPath = `polygon(
    0% 0%,
    100% 0%,
    110% ${bottomPercent}%,
    ${rightPercent}% 110%,
    0% 100%
  )`;

  const frontWidth = rect.width;
  const frontHeight = rect.height;
  const missingWidth = frontWidth * (1 - rightPercent / 100);
  const missingHeight = frontHeight * (1 - bottomPercent / 100);
  const triangleSize = Math.max(missingWidth, missingHeight);

  flipTriangle.style.borderLeft = triangleSize + 'px solid transparent';
  flipTriangle.style.borderTop = triangleSize + 'px solid #F4DFCB';
  flipTriangle.style.right = '-40px';
  flipTriangle.style.bottom = '-40px';
});

function resetFlip() {
  flipFront.style.clipPath = `polygon(
    0% 0%,
    100% 0%,
    100% ${initBottom}%,
    ${initRight}% 100%,
    0% 100%
  )`;

  flipTriangle.style.borderLeft = '87px solid transparent';
  flipTriangle.style.borderTop = '85px solid #F4DFCB';
  flipTriangle.style.right = '-30px';
  flipTriangle.style.bottom = '-30px';
}

resetFlip();

// ---- èƒ¶å›ŠæŒ‰é’®äº¤äº’ ----
const capsule = document.getElementById('capsule');
  const topHalf = document.querySelector('.top-half');
  const bottomHalf = document.querySelector('.bottom-half');

  // å®šä¹‰çŠ¶æ€å¸¸é‡
  const STATES = {
    INITIAL: 'initial',
    WHITE_THREE_QUARTER: 'white-three-quarter',
    WHITE_FULL: 'white-full',
    BLACK_THREE_QUARTER: 'black-three-quarter',
    BLACK_FULL: 'black-full'
  };

  // çŠ¶æ€è½¬æ¢è§„åˆ™
  const stateTransitions = {
    [STATES.INITIAL]: {
      top: STATES.WHITE_THREE_QUARTER,
      bottom: STATES.BLACK_THREE_QUARTER
    },
    [STATES.WHITE_THREE_QUARTER]: {
      top: STATES.WHITE_FULL,
      bottom: STATES.INITIAL
    },
    [STATES.WHITE_FULL]: {
      bottom: STATES.WHITE_THREE_QUARTER
    },
    [STATES.BLACK_THREE_QUARTER]: {
      top: STATES.INITIAL,
      bottom: STATES.BLACK_FULL
    },
    [STATES.BLACK_FULL]: {
      top: STATES.BLACK_THREE_QUARTER
    }
  };

  // å½“å‰çŠ¶æ€
  let currentState = STATES.INITIAL;

  function updateState(action) {
    // è·å–å½“å‰çŠ¶æ€çš„è½¬æ¢è§„åˆ™
    const transitions = stateTransitions[currentState];
    
    // å¦‚æœå½“å‰æ“ä½œåœ¨è½¬æ¢è§„åˆ™ä¸­ï¼Œåˆ™æ›´æ–°çŠ¶æ€
    if (transitions && transitions[action]) {
      currentState = transitions[action];
      
      // æ›´æ–°èƒ¶å›ŠæŒ‰é’®çš„ç±»
      capsule.className = 'capsule-button';
      capsule.classList.add(currentState);
    }
  }

  topHalf.addEventListener('click', () => {
    updateState('top');
  });

  bottomHalf.addEventListener('click', () => {
    updateState('bottom');
  });

  const container = document.getElementById('circleContainer');
const months = container.querySelectorAll('.month');
const total = months.length;
const angleStep = 360 / total;

months.forEach((month, i) => {
    const angle = i * angleStep;
    month.style.transform = `rotate(${angle}deg) translateY(-90px) rotate(-${angle}deg)`;

    const animationDuration = 20;
    const startAngle = angle;

    const style = document.createElement('style');
    style.textContent = `
        @keyframes rotateMonth${i} {
            from { transform: rotate(${startAngle}deg) translateY(-90px) rotate(-${startAngle}deg); }
            to { transform: rotate(${startAngle + 360}deg) translateY(-90px) rotate(-${startAngle + 360}deg); }
        }
        .month:nth-child(${i + 1}) { animation: rotateMonth${i} ${animationDuration}s linear infinite; }
    `;
    document.head.appendChild(style);

    month.addEventListener('mouseenter', () => {
        months.forEach(m => m.style.animationPlayState = 'paused');
    });
    month.addEventListener('mouseleave', () => {
        months.forEach(m => m.style.animationPlayState = 'running');
    });
});

function updateColorsAndHighlight() {
    const rect = container.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;

    months.forEach(month => {
        const mRect = month.getBoundingClientRect();
        const monthX = mRect.left + mRect.width / 2;
        const monthY = mRect.top + mRect.height / 2;

        let angle = Math.atan2(monthY - centerY, monthX - centerX) * (180 / Math.PI);
        if (angle < 0) angle += 360;

        month.classList.remove('highlight');
        if (Math.abs(angle - 180) < 15) month.classList.add('highlight');

        const distance = Math.abs(monthY - centerY) / (rect.height / 2);
        const baseColor = 29;
        const alpha = 1 - distance;

        if (!month.classList.contains('highlight')) {
            month.style.color = `rgba(${baseColor},${baseColor},${baseColor},${alpha})`;
            month.style.fontSize = '14px';
            month.style.fontWeight = 'normal';
        } else {
            month.style.color = '#ffffff';
            month.style.fontSize = '18px';
            month.style.fontWeight = 'bold';
        }
    });

    requestAnimationFrame(updateColorsAndHighlight);
}

updateColorsAndHighlight();

/* ------------------------------
   --- æ°´å¹³è½®æ’­ï¼ˆhorizontal carouselï¼‰
   ä½¿ç”¨ç‹¬ç«‹å˜é‡åï¼šhorizContainer/horizContent/horiz...
   ------------------------------ */
const horizContainer = document.getElementById('horizontalContainer');
const horizContent = document.getElementById('horizontalContent');

if (horizContainer && horizContent) {
    const horizItemsSource = [
        'image/Projects/pic1.jpg',
        'image/Projects/pic2.jpg',
        'image/Projects/pic3.jpg',
        'image/Projects/pic4.jpg',
        'image/Projects/pic5.jpg',
        'image/Projects/pic6.jpg'
    ];
    const horizItemCount = horizItemsSource.length;
    let horizCurrentIndex = 0;
    let horizIsAnimating = false;
    let horizScrollTimeout = null;

    function createCarouselItems() {
        horizContent.innerHTML = '';
        // é‡å¤å¤šç»„æ¥å®ç°æ— ç¼å¾ªç¯
        const extended = [...horizItemsSource, ...horizItemsSource, ...horizItemsSource, ...horizItemsSource, ...horizItemsSource];
        extended.forEach((src, idx) => {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'horizontal-item';
            itemDiv.dataset.index = idx;
            itemDiv.dataset.originalItem = src;
            const img = document.createElement('img');
            img.src = src;
            img.alt = '';
            itemDiv.appendChild(img);
            horizContent.appendChild(itemDiv);
        });
        updateContentPadding();
        horizCurrentIndex = horizItemCount * 2; // ä¸­é—´ç»„ç¬¬ä¸€ä¸ª
        scrollToIndex(horizCurrentIndex, false);
        updateCarouselState();
    }

    function updateContentPadding() {
        const containerWidth = horizContainer.offsetWidth;
        const firstItem = horizContent.querySelector('.horizontal-item');
        const itemWidth = firstItem ? firstItem.offsetWidth : 700;
        const padding = Math.max(0, (containerWidth - itemWidth) / 2);
        horizContent.style.padding = `0 ${padding}px`;
    }

    function scrollToIndex(index, smooth = true) {
        const allItems = horizContent.querySelectorAll('.horizontal-item');
        if (!allItems || index < 0 || index >= allItems.length) return;
        const item = allItems[index];
        const containerRect = horizContainer.getBoundingClientRect();
        const itemRect = item.getBoundingClientRect();
        const scrollLeft = item.offsetLeft - (containerRect.width - itemRect.width) / 2;
        horizContainer.scrollTo({ left: scrollLeft, behavior: smooth ? 'smooth' : 'auto' });
    }

    function updateCarouselState() {
        const allItems = horizContent.querySelectorAll('.horizontal-item');
        if (!allItems.length) return;
        allItems.forEach(it => it.classList.remove('active'));
        const containerRect = horizContainer.getBoundingClientRect();
        const containerCenter = containerRect.left + containerRect.width / 2;
        let closestIndex = 0;
        let minDistance = Infinity;
        allItems.forEach((item, index) => {
            const itemRect = item.getBoundingClientRect();
            const itemCenter = itemRect.left + itemRect.width / 2;
            const distance = Math.abs(itemCenter - containerCenter);
            if (distance < minDistance) {
                minDistance = distance;
                closestIndex = index;
            }
        });
        if (allItems[closestIndex]) allItems[closestIndex].classList.add('active');
        handleInfiniteLoop(closestIndex);
    }

    function handleInfiniteLoop(closestIndex) {
        const allItems = horizContent.querySelectorAll('.horizontal-item');
        const totalItems = allItems.length;
        if (closestIndex < horizItemCount) {
            horizCurrentIndex = closestIndex + horizItemCount * 2;
            scrollToIndex(horizCurrentIndex, false);
        } else if (closestIndex >= totalItems - horizItemCount) {
            horizCurrentIndex = closestIndex - horizItemCount * 2;
            scrollToIndex(horizCurrentIndex, false);
        } else {
            horizCurrentIndex = closestIndex;
        }
    }

    function navigateTo(direction) {
        if (horizIsAnimating) return;
        horizIsAnimating = true;
        if (direction === 'next') horizCurrentIndex++;
        else horizCurrentIndex--;
        scrollToIndex(horizCurrentIndex);
        updateCarouselState();
        setTimeout(() => { horizIsAnimating = false; }, 500);
    }

    // æ‹–æ‹½æ”¯æŒï¼ˆcarousel ç‹¬ç«‹å˜é‡ï¼‰
    let horizStartX = 0;
    let horizIsDragging = false;

    function startDrag(e) {
        if (horizIsAnimating) return;
        horizIsDragging = true;
        horizStartX = (e.pageX !== undefined) ? e.pageX : (e.touches && e.touches[0].pageX);
        horizContainer.style.scrollBehavior = 'auto';
    }
    function drag(e) {
  if (!horizIsDragging) return;

  const touch = e.touches ? e.touches[0] : e;
  const dx = (horizStartX || 0) - touch.pageX;

  // ä»…åœ¨æ°´å¹³æ»‘åŠ¨æ˜æ˜¾æ—¶é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ˆä¿ç•™ä¸Šä¸‹æ»‘åŠ¨ï¼‰
  if (Math.abs(dx) > 10 && Math.abs(dx) > Math.abs(e.touches?.[0]?.clientY || 0)) {
    e.preventDefault();
  }
}

    function endDrag(e) {
        if (!horizIsDragging) return;
        horizIsDragging = false;
        const endX = (e.pageX !== undefined) ? e.pageX : (e.changedTouches && e.changedTouches[0].pageX);
        if (!endX) {
            scrollToIndex(horizCurrentIndex);
            return;
        }
        const diff = horizStartX - endX;
        horizContainer.style.scrollBehavior = 'smooth';
        if (Math.abs(diff) > 50) {
            diff > 0 ? navigateTo('next') : navigateTo('prev');
        } else {
            scrollToIndex(horizCurrentIndex);
        }
    }

    horizContainer.addEventListener('scroll', () => {
        if (horizIsDragging || horizIsAnimating) return;
        if (horizScrollTimeout) clearTimeout(horizScrollTimeout);
        horizScrollTimeout = setTimeout(() => updateCarouselState(), 100);
    });

   

    window.addEventListener('resize', () => {
        updateContentPadding();
        scrollToIndex(horizCurrentIndex, false);
        adjustHorizontalSectionScale();
    });

    // init
    createCarouselItems();
    adjustHorizontalSectionScale();
} // end if horizContainer & horizContent

// --- æ—¶é—´è®¡ç®—å‡½æ•° ---
function calculateTimeDiff(startDate) {
  const now = new Date();
  let diff = now - startDate;

  const years = Math.floor(diff / (1000 * 60 * 60 * 24 * 365.25));
  diff -= years * (1000 * 60 * 60 * 24 * 365.25);
  const days = Math.floor(diff / (1000 * 60 * 60 * 24));
  diff -= days * (1000 * 60 * 60 * 24);
  const hours = Math.floor(diff / (1000 * 60 * 60));
  diff -= hours * (1000 * 60 * 60);
  const minutes = Math.floor(diff / (1000 * 60));
  diff -= minutes * (1000 * 60);
  const seconds = Math.floor(diff / 1000);

  return { years, days, hours, minutes, seconds };
}

// --- æ ¼å¼åŒ–ç®€åŒ–æ˜¾ç¤º ---
function formatSimpleYears(diff) {
  return `${diff.years}+ years`;
}

// --- æ ¼å¼åŒ–å®Œæ•´æ—¶é—´æ˜¾ç¤º ---
function formatFullTime(diff) {
  return `${diff.years}y ${diff.days}d ${diff.hours}h ${diff.minutes}m ${diff.seconds}s`;
}

</script>
<script>
window.addEventListener("load", () => {
  function calculateTimeDiff(startDate) {
    const now = new Date();
    let diff = now - startDate;
    const years = Math.floor(diff / (1000*60*60*24*365.25));
    diff -= years * (1000*60*60*24*365.25);
    const days = Math.floor(diff / (1000*60*60*24));
    diff -= days * (1000*60*60*24);
    const hours = Math.floor(diff / (1000*60*60));
    diff -= hours * (1000*60*60);
    const minutes = Math.floor(diff / (1000*60));
    diff -= minutes * (1000*60);
    const seconds = Math.floor(diff / 1000);
    return { years, days, hours, minutes, seconds };
  }

  function formatSimpleYears(diff) {
    return `${diff.years}+ years`;
  }

  function formatFullTime(diff) {
    return `${diff.years}y ${diff.days}d ${diff.hours}h ${diff.minutes}m ${diff.seconds}s`;
  }

  function updateAllTimes() {
    document.querySelectorAll('.skill-box').forEach(box => {
      const start = new Date(box.dataset.start);
      const diff = calculateTimeDiff(start);
      const timeEl = box.querySelector('.time');
      if (timeEl) timeEl.textContent = formatSimpleYears(diff);

      const details = box.querySelector('.details');
      if (!details) return;
      const skillListEl = box.querySelector('.skill-list');
      const rightEl = box.querySelector('.skill-time-right');

      if (details.classList.contains('open')) {
        skillListEl.innerHTML = '';
        const skills = box.dataset.skills.split('ï½œ');
        skills.forEach(skill => {
          const skillItem = document.createElement('div');
          skillItem.textContent = skill;
          skillListEl.appendChild(skillItem);
        });
        rightEl.querySelector('.active-since').textContent = `since ${start.toLocaleDateString()}`;
        rightEl.querySelector('.full-time').textContent = formatFullTime(diff);
      }
    });
  }

  document.querySelectorAll('.skill-box').forEach(box => {
    box.addEventListener('click', (e) => {
      e.stopPropagation(); // é˜²æ­¢ä¸Šå±‚ click æ•è·
      const details = box.querySelector('.details');
      const isOpen = details.classList.contains('open');
      document.querySelectorAll('.details').forEach(d => d.classList.remove('open'));
      if (!isOpen) {
        details.classList.add('open');
        requestAnimationFrame(() => updateAllTimes());
      }
    });
  });

  updateAllTimes();
  setInterval(updateAllTimes, 1000);
});
</script>
<script>
(function () {
  const container = document.querySelector(".horizontal-scroll-container");
  const items = document.querySelectorAll(".horizontal-item");
  if (!container || !items.length) return;

  // â€”â€” å‚æ•°å¯æŒ‰éœ€å¾®è°ƒ â€”â€”
  const swipeThreshold = 40;   // è§¦å‘ç¿»é¡µçš„æœ€å°æ°´å¹³ä½ç§»(px)
  const angleGuard = 1.3;      // æ°´å¹³/å‚ç›´æ–¹å‘æ¯”å€¼é˜ˆå€¼ï¼Œè¶Šå¤§è¶Šä¸å®¹æ˜“è¯¯åˆ¤ä¸ºæ°´å¹³æ»‘åŠ¨
  const pageDuration = 250;    // ç¿»é¡µæ»šåŠ¨åŠ¨ç”»æ—¶é•¿(ms)

  let startX = 0, startY = 0, isTouching = false, isPaging = false;
  let rafId = null, scrollEndTimer = null;

  // å±…ä¸­æ”¾å¤§ï¼ˆæ»šåŠ¨æ—¶å®æ—¶æ‰§è¡Œï¼‰
  function updateScale() {
    const rect = container.getBoundingClientRect();
    const center = rect.left + rect.width / 2;

    items.forEach((item) => {
      const r = item.getBoundingClientRect();
      const mid = r.left + r.width / 2;
      const dist = Math.abs(center - mid);
      const scale = Math.max(0.9, 1 - dist / (rect.width * 0.8));
      item.style.transform = `scale(${scale})`;
      item.style.opacity = scale > 0.97 ? 1 : 0.8;
      item.style.transition = "transform 0.18s ease-out, opacity 0.18s ease-out";
    });
  }

  function onScroll() {
    if (rafId) cancelAnimationFrame(rafId);
    rafId = requestAnimationFrame(updateScale);

    // åœæ­¢æ»šåŠ¨åå¸é™„åˆ°æœ€è¿‘ä¸€å¼ 
    if (scrollEndTimer) clearTimeout(scrollEndTimer);
    scrollEndTimer = setTimeout(snapToNearest, 80);
  }

  container.addEventListener("scroll", onScroll, { passive: true });

  // ç‚¹å‡»æŸå¼ ï¼Œå¹³æ»‘æ»šåŠ¨åˆ°ä¸­é—´
  items.forEach((item) => {
    item.addEventListener("click", () => {
      centerTo(item);
    });
  });

  function centerTo(item) {
    if (!item) return;
    const target =
      item.offsetLeft - (container.clientWidth - item.offsetWidth) / 2;
    smoothScrollTo(target, pageDuration);
  }

  function snapToNearest() {
    if (isPaging) return;
    const rect = container.getBoundingClientRect();
    const center = rect.left + rect.width / 2;
    let best = null, minDist = Infinity;

    items.forEach((item) => {
      const r = item.getBoundingClientRect();
      const mid = r.left + r.width / 2;
      const d = Math.abs(center - mid);
      if (d < minDist) { minDist = d; best = item; }
    });

    centerTo(best);
  }

  function smoothScrollTo(x, duration) {
    isPaging = true;
    const start = container.scrollLeft;
    const dx = x - start;
    const t0 = performance.now();

    function step(t) {
      const p = Math.min(1, (t - t0) / duration);
      // easeOutCubic
      const e = 1 - Math.pow(1 - p, 3);
      container.scrollLeft = start + dx * e;
      if (p < 1) requestAnimationFrame(step);
      else {
        isPaging = false;
        updateScale();
      }
    }
    requestAnimationFrame(step);
  }

  // è½»é‡çº§â€œä»…åœ¨æ˜æ˜¾æ°´å¹³æ»‘åŠ¨æ—¶ç¿»ä¸€é¡µâ€ï¼Œä¸é˜»æ–­å‚ç›´æ»šåŠ¨
  container.addEventListener("touchstart", (e) => {
    if (isPaging) return;
    const t = e.touches[0];
    startX = t.clientX;
    startY = t.clientY;
    isTouching = true;
  }, { passive: true });

  container.addEventListener("touchend", (e) => {
    if (!isTouching || isPaging) return;
    isTouching = false;

    const t = e.changedTouches[0];
    const dx = t.clientX - startX;
    const dy = t.clientY - startY;

    // å‚ç›´æ‰‹åŠ¿æˆ–ä½ç§»ä¸å¤Ÿ â†’ äº¤ç»™æµè§ˆå™¨ï¼Œä¿æŒä¸Šä¸‹æ»šåŠ¨æµç•…
    if (Math.abs(dx) < swipeThreshold || Math.abs(dx) < Math.abs(dy) * angleGuard) {
      snapToNearest(); // æ‰‹åŠ¿ç»“æŸåä»å¸é™„ä¸€ä¸‹
      return;
    }

    // æ°´å¹³æ˜ç¡®ç¿»ä¸€é¡µï¼ˆåª Â±1ï¼‰
    const dir = dx < 0 ? 1 : -1;
    const target = pickNeighbor(dir);
    centerTo(target);
  }, { passive: true });

  // é€‰æ‹©å½“å‰æœ€è¿‘ä¸€å¼ çš„å·¦å³é‚»å±…å„ä¸€å¼ 
  function pickNeighbor(dir) {
    const rect = container.getBoundingClientRect();
    const center = rect.left + rect.width / 2;
    let closestIndex = 0, minDist = Infinity;

    items.forEach((item, i) => {
      const r = item.getBoundingClientRect();
      const mid = r.left + r.width / 2;
      const d = Math.abs(center - mid);
      if (d < minDist) { minDist = d; closestIndex = i; }
    });

    const nextIndex = Math.max(0, Math.min(items.length - 1, closestIndex + dir));
    return items[nextIndex];
  }

  // åˆå§‹çŠ¶æ€
  updateScale();
})();
</script>


</body>
</html>
